<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G6 Flights</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='homepage/css/styles.css') }}">
    <style>

        .image-menu {
            width: 200px; 
            height: auto; 
        }

        .image-menu ul {
            list-style-type: none;
            padding: 0;
        }

        .image-menu li {
            margin: 10px 0;
        }

        .top-nav {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 10px;
        }
    </style>
</head>
<body>

    <!-- Top navigation bar -->
    <div class="top-nav">
        <a href="{{ url_for('login_page') }}">{{ current_username }}</a>
        <a href="{{ url_for('passenger_info') }}">passenger information</a>
        <a href="{{ url_for('cart') }}">Cart</a>
    </div>

    <!-- Fixed Menu with Background Image -->
    <div id="imageMenu" class="image-menu" style="width: {{ '150px' if current_username != 'Login / Sign up' else '200px' }} ; ">
        <ul>
            <li><a href="{{ url_for('flights') }}">Flights</a></li>
            <li><a href="{{ url_for('booking_history') }}">Booking History</a></li>
            {% if current_username == "Login / Sign up" %}
            <li><a href="{{ url_for('login_page') }}">Login</a></li>
            {% endif %}
            <li><a href="{{ url_for('logout') }}">Logout</a></li>
        </ul>
    </div>

    <!-- Main content with background image -->
    <section class="welcome-section" style="background-image: url('{{ url_for('static', filename='homepage/images/Background.jpg') }}');">
        <div class="overlay">
            <img src="{{ url_for('static', filename='homepage/images/Welcome to G6 flights.png') }}" alt="Welcome" class="welcome-image">
            <div class="booking-form">
                <h2 class="form-title">Booking process</h2>

                <!-- Trip Type Selection -->
                <form method="POST" action="/search-results">
                    <div class="form-row radio-row">
                        <label>
                            <input type="radio" name="trip" value="oneway" checked> Oneway
                        </label>
                        <label>
                            <input type="radio" name="trip" value="roundtrip"> Round trip
                        </label>
                    </div>

                    <!-- Form Fields -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>From:</label>
                            <input type="text" name="from_city" placeholder="Enter departure city">
                        </div>
                        <div class="form-group">
                            <label>To:</label>
                            <input type="text" name="to_city" placeholder="Enter destination city">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Travellers and class:</label>
                            <select name="travellers_class">
                                <option value="1 Traveller">1 Traveller</option>
                                <option value="2 Travellers">2 Travellers</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Departure Date:</label>
                            <input type="date" name="departure_date" id="departureDate" min="">
                        </div>
                        <div class="form-group return-date" id="returnDateGroup">
                            <label>Return Date:</label>
                            <input type="date" name="return_date" id="returnDate" min="">
                        </div>
                    </div>

                    <!-- Search Button -->
                    <div class="search-group">
                        <button type="submit" class="search-button">
                            <img src="{{ url_for('static', filename='homepage/images/Search.png') }}" alt="Search">
                        </button>
                    </div>
                </form>

                <script>
                    const today = new Date().toISOString().split('T')[0];

                    const departureDateInput = document.getElementById("departureDate");
                    const returnDateInput = document.getElementById("returnDate");

                    departureDateInput.setAttribute("min", today);
                    returnDateInput.setAttribute("min", today);

                    departureDateInput.addEventListener("change", function() {
                        const selectedDepartureDate = this.value;
                        returnDateInput.setAttribute("min", selectedDepartureDate);
                        returnDateInput.value = selectedDepartureDate;
                    });

                    const tripTypeRadios = document.querySelectorAll('input[name="trip"]');
                    tripTypeRadios.forEach(radio => {
                        radio.addEventListener('change', function() {
                            const returnDateGroup = document.getElementById('returnDateGroup');
                            if (this.value === 'oneway') {
                                returnDateGroup.style.display = 'none';
                            } else {
                                returnDateGroup.style.display = 'block';
                            }
                        });
                    });

                    document.getElementById('returnDateGroup').style.display = 'none';
                </script>
            </div>
        </div>
    </section>

</body>
</html>